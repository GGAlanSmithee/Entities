<!DOCTYPE html>
<html>
    <head>
        <title>Basic usage of the entity factory class</title>
    </head>
    <body>
        <script type='text/javascript' src='../../dist/Entities.js'></script>
        
        <script type='text/javascript'>

            'use strict';
            
            let world   = new Entities.World();
            
            let position   = world.registerComponent(Entities.World.ComponentType.Static, { x : 0, y : 0 });
            let velocity   = world.registerComponent(Entities.World.ComponentType.Dynamic, 2.0);
            let selectable = world.registerComponent(Entities.World.ComponentType.Static, { isSelected  : false });
            
            let factory = new Entities.EntityFactory(world);
            
            factory.registerInitializer(position, function() {
                 this.x = 10;
                 this.y = 10;
            });
            
            factory.registerInitializer(velocity, function() {
                 return 2.5;
            });
            
            factory.registerInitializer(selectable, function() {
                this.isSelected = true;
            });
            
            let entities = factory.build()
                                  .withComponent(position)
                                  .withComponent(velocity)
                                  .withComponent(selectable)
                                  .create(world, 4);
            
            console.log(entities);
            
            entities = factory.build()
                              .withComponent(velocity, function() { return 1.5; })
                              .withComponent(selectable, function() { this.isSelected = false; })
                              .create(world, 3);
            
            console.log(entities);
            
            entities = factory.build()
                              .withComponent(position)
                              .withComponent(selectable)
                              .create(world, 7);
            
            console.log(entities);
            
            let configuration = factory.build()
                                       .withComponent(selectable)
                                       .createConfiguration();
                                       
            entities = factory.create(world, 8, configuration);
            
            console.log(entities);
            
        </script> 
    </body>
</html>